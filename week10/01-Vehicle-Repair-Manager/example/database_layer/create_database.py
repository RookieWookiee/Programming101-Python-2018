import sqlite3


DB_NAME = "vehicle_system.db"


db = sqlite3.connect(DB_NAME)
crs = db.cursor()

DROP_BASE_USER_SQL = """
DROP TABLE IF EXISTS BASE_USER
"""

crs.execute(DROP_BASE_USER_SQL)
db.commit()

CREATE_BASE_USER_SQL = """
CREATE TABLE IF NOT EXISTS BASE_USER(
  ID INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
  USER_NAME TEXT NOT NULL,
  EMAIL TEXT NOT NULL,
  PHONE_NUMBER INTEGER NOT NULL,
  ADDRESS TEXT NOT NULL
)"""

crs.execute(CREATE_BASE_USER_SQL)
db.commit()

DROP_CLIENT_SQL = """
DROP TABLE IF EXISTS CLIENT
"""

crs.execute(DROP_CLIENT_SQL)
db.commit()

CREATE_CLIENT_SQL = """
CREATE TABLE IF NOT EXISTS CLIENT(
  ID INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
  BASE_ID INTEGER NOT NULL,
  FOREIGN KEY (BASE_ID) REFERENCES BASE_USER(ID)
)"""

crs.execute(CREATE_CLIENT_SQL)
db.commit()

DROP_MECHANIC_SQL = """
DROP TABLE IF EXISTS MECHANIC
"""

crs.execute(DROP_MECHANIC_SQL)
db.commit()

CREATE_MECHANIC_SQL = """
CREATE TABLE IF NOT EXISTS MECHANIC(
  ID INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
  BASE_ID INTEGER NOT NULL,
  TITLE TEXT NOT NULL,
  FOREIGN KEY (BASE_ID) REFERENCES BASE_USER(ID)
)"""

crs.execute(CREATE_MECHANIC_SQL)
db.commit()



DROP_VEHICLE_SQL = """
DROP TABLE IF EXISTS VEHICLE
"""

crs.execute(DROP_VEHICLE_SQL)
db.commit()

CREATE_VEHICLE_SQL = """
CREATE TABLE IF NOT EXISTS VEHICLE(
  ID INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
  OWNER INTEGER NOT NULL,
  CATEGORY TEXT NOT NULL,
  MAKE TEXT NOT NULL,
  MODEL TEXT NOT NULL,
  REGISTER_NUMBER TEXT NOT NULL,
  GEAR_BOX TEXT NOT NULL,
  FOREIGN KEY (OWNER) REFERENCES CLIENT(ID)
)"""

crs.execute(CREATE_VEHICLE_SQL)
db.commit()

db.close()
